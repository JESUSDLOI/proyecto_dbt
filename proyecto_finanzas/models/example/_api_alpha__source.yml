
version: 2

sources:
  - name: api_alpha # Datos de la API Alphavantage
    schema: DATOS_FINANZAS # schema de la base de datos
    database: "DATOS_BRONZE_FINANZAS" # base de datos

    quoting:
      database: false
      schema: false
      identifier: false

    tables:
      - name: empresa_data
        description: "Tabla de datos de finanzas de empresas"
        columns:
          - name: SYMBOL
            description: "Identificador único y abreviado de la empresa."
            tests:
              - not_null
              - unique


          - name: OVERVIEW__SYMBOL
            description: "Identificador único de la empresa en el resumen."
            tests:
              - not_null

          - name: OVERVIEW__ASSET_TYPE
            description: "Tipo de activo financiero que representa la empresa."

          - name: OVERVIEW__NAME
            description: "Nombre oficial registrado de la empresa."
            tests:
              - not_null
 
          - name: OVERVIEW__DESCRIPTION
            description: "Descripción general de la empresa y sus actividades."

          - name: OVERVIEW__CIK
            description: "Identificador único asignado por la SEC (EDGAR)."
            tests:
              - not_null
              - unique

          - name: OVERVIEW__EXCHANGE
            description: "Mercado en el que la empresa cotiza."
            tests:
              - not_null

          - name: OVERVIEW__CURRENCY
            description: "Moneda principal utilizada en los reportes financieros."
            tests:
              - not_null

          - name: OVERVIEW__COUNTRY
            description: "País de registro de la empresa."
            tests:
              - not_null

          - name: OVERVIEW__SECTOR
            description: "Sector económico en el que opera la empresa."
            tests:
              - not_null

          - name: OVERVIEW__INDUSTRY
            description: "Industria específica dentro del sector de la empresa."
            tests:
              - not_null

          - name: OVERVIEW__ADDRESS
            description: "Dirección física registrada de la empresa."
            tests:
              - not_null
              - unique

          - name: OVERVIEW__OFFICIAL_SITE
            description: "Sitio web oficial de la empresa."
            tests:
              - not_null
              - unique

          - name: OVERVIEW__FISCAL_YEAR_END
            description: "Fecha de cierre del año fiscal de la empresa."
            tests:
              - not_null
              - date_in_past

          - name: OVERVIEW__LATEST_QUARTER
            description: "Último trimestre fiscal reportado por la empresa."
            tests:
              - not_null
              - date_in_past

          - name: OVERVIEW__MARKET_CAPITALIZATION
            description: "Valor total de la empresa en el mercado financiero."
            tests:
              - not_null
              - range:
                  min: 0

          - name: OVERVIEW__EBITDA
            description: "Ganancias antes de intereses, impuestos, depreciación y amortización."
            tests:
              - not_null


          - name: OVERVIEW__PE_RATIO
            description: "Relación precio-ganancias de la empresa."
            tests:
              - not_null

          - name: OVERVIEW__PEG_RATIO
            description: "Relación precio-ganancias ajustada al crecimiento."
            tests:
              - not_null

          - name: OVERVIEW__BOOK_VALUE
            description: "Valor contable de la empresa por acción."
            tests:
              - not_null

          - name: OVERVIEW__DIVIDEND_PER_SHARE
            description: "Cantidad pagada en dividendos por acción."
            tests:
              - range:
                  min: 0

          - name: OVERVIEW__DIVIDEND_YIELD
            description: "Rendimiento porcentual de los dividendos sobre el precio de la acción."
            tests:
              - range:
                  min: 0
                  max: 100

          - name: OVERVIEW__EPS
            description: "Ganancias por acción reportadas por la empresa."
            tests:
              - not_null

          - name: OVERVIEW__REVENUE_PER_SHARE_TTM
            description: "Ingresos generados por acción en los últimos 12 meses."
            tests:
              - not_null

          - name: OVERVIEW__PROFIT_MARGIN
            description: "Margen porcentual de beneficios sobre ingresos totales."
            tests:
              - range:
                  min: 0
                  max: 100

          - name: OVERVIEW__OPERATING_MARGIN_TTM
            description: "Margen operativo en los últimos 12 meses."
            tests:
              - range:
                  min: 0
                  max: 100

          - name: OVERVIEW__RETURN_ON_ASSETS_TTM
            description: "Retorno porcentual sobre los activos en los últimos 12 meses."
            tests:
              - range:
                  min: 0
                  max: 100

          - name: OVERVIEW__RETURN_ON_EQUITY_TTM
            description: "Retorno porcentual sobre el patrimonio en los últimos 12 meses."
            tests:
              - range:
                  min: 0
                  max: 100

          - name: OVERVIEW__REVENUE_TTM
            description: "Ingresos totales generados en los últimos 12 meses."
            tests:
              - not_null

          - name: OVERVIEW__GROSS_PROFIT_TTM
            description: "Beneficio bruto total en los últimos 12 meses."
            tests:
              - not_null

          - name: OVERVIEW__DILUTED_EPSTTM
            description: "Ganancias diluidas por acción en los últimos 12 meses."
            tests:
              - not_null

          - name: OVERVIEW__QUARTERLY_EARNINGS_GROWTH_YOY
            description: "Crecimiento porcentual de las ganancias trimestrales año contra año."
            tests:
              - range:
                  min: -100
                  max: 100

          - name: OVERVIEW__QUARTERLY_REVENUE_GROWTH_YOY
            description: "Crecimiento porcentual de los ingresos trimestrales año contra año."
            tests:
              - range:
                  min: -100
                  max: 100

          - name: OVERVIEW__ANALYST_TARGET_PRICE
            description: "Precio objetivo estimado por analistas para la acción."
            tests:
              - not_null

          - name: OVERVIEW__TRAILING_PE
            description: "Relación precio/ganancias con datos históricos."
            tests:
              - not_null

          - name: OVERVIEW__FORWARD_PE
            description: "Relación precio/ganancias con proyecciones futuras."
            tests:
              - not_null

          - name: OVERVIEW__PRICE_TO_SALES_RATIO_TTM
            description: "Relación precio/ventas en los últimos 12 meses."
            tests:
              - not_null

          - name: OVERVIEW__PRICE_TO_BOOK_RATIO
            description: "Relación precio/valor contable de la acción."
            tests:
              - not_null

          - name: OVERVIEW__EV_TO_REVENUE
            description: "Valor empresarial en relación con ingresos totales."
            tests:
              - not_null

          - name: OVERVIEW__EV_TO_EBITDA
            description: "Valor empresarial en relación con EBITDA."
            tests:
              - not_null

          - name: OVERVIEW__BETA
            description: "Medida de volatilidad del precio de la acción respecto al mercado."
            tests:
              - not_null

          - name: OVERVIEW___52_WEEK_HIGH
            description: "Precio más alto alcanzado en las últimas 52 semanas."
            tests:
              - not_null

          - name: OVERVIEW___52_WEEK_LOW
            description: "Precio más bajo alcanzado en las últimas 52 semanas."
            tests:
              - not_null

          - name: OVERVIEW___50_DAY_MOVING_AVERAGE
            description: "Promedio móvil del precio de la acción en los últimos 50 días."
            tests:
              - not_null

          - name: OVERVIEW___200_DAY_MOVING_AVERAGE
            description: "Promedio móvil del precio de la acción en los últimos 200 días."
            tests:
              - not_null

          - name: OVERVIEW__SHARES_OUTSTANDING
            description: "Número total de acciones en circulación."
            tests:
              - not_null
              - numeric

          - name: OVERVIEW__DIVIDEND_DATE
            description: "Fecha del pago de dividendos más reciente."
            tests:
              - date_in_past

          - name: OVERVIEW__EX_DIVIDEND_DATE
            description: "Fecha ex-dividendo más reciente."
            tests:
              - date_in_past

          - name: BALANCE_SHEET__SYMBOL
            description: "Símbolo del balance de la empresa."


          - name: INCOME_STATEMENT__SYMBOL
            description: "Símbolo del estado de resultados de la empresa."

          - name: CASH_FLOW__SYMBOL
            description: "Símbolo del flujo de caja de la empresa."


          - name: _DLT_LOAD_ID
            description: "ID de carga para los datos del DLT."
            tests:
              - not_null

          - name: _DLT_ID
            description: "Identificador único para los datos del DLT."
            tests:
              - not_null
              - unique
