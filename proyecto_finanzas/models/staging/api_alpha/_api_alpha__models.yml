version: 2

models:
  - name: stg_api_alpha__dims_empresas
    description: "Tabla de datos de finanzas de empresas"
    columns:
      - name: idx_CIK
        description: "Índice de Clasificación de la Comisión de Bolsa y Valores (CIK) que identifica de manera única a las empresas registradas en la SEC."

      - name: direccion
        description: "Dirección física de la sede principal de la empresa, incluyendo calle, número, ciudad, estado y código postal."

      - name: descripcion
        description: "Descripción detallada de la empresa, incluyendo su misión, visión, productos y servicios ofrecidos."

      - name: traduccion
        description: "Traducción de la descripción de la empresa al español para facilitar la comprensión en mercados hispanohablantes."
        
      - name: ambito_neg1
        description: "Primer ámbito de negocio extraído de la respuesta de Cortex. Se espera un máximo de tres palabras; si no, se genera una advertencia."
        tests:
          - max_tres_pala

      - name: ambito_neg2
        description: "Segundo ámbito de negocio extraído de la respuesta de Cortex. Se espera un máximo de tres palabras; si no, se genera una advertencia."
        tests:
          - max_tres_pala

      - name: ambito_neg3
        description: "Tercer ámbito de negocio extraído de la respuesta de Cortex. Se espera un máximo de tres palabras; si no, se genera una advertencia."
        tests:
          - max_tres_pala

      - name: ambito_neg4
        description: "Cuarto ámbito de negocio extraído de la respuesta de Cortex. Se espera un máximo de tres palabras; si no, se genera una advertencia."
        tests:
          - max_tres_pala

      - name: ambito_neg5
        description: "Quinto ámbito de negocio extraído de la respuesta de Cortex. Se espera un máximo de tres palabras; si no, se genera una advertencia."
        tests:
          - max_tres_pala

      - name: id_simbolo
        description: "Identificador único del símbolo bursátil de la empresa."

      - name: simbolo
        description: "Símbolo bursátil de la empresa utilizado en los mercados financieros."

      - name: nombre_empresa
        description: "Nombre oficial de la empresa."
        tests:
          - not_null

      - name: id_web
        description: "Clave única para identificar los datos del sitio web de la empresa."
        tests:
          - not_null

      - name: sitio_web
        description: "URL del sitio web oficial de la empresa."

      - name: tipo_activo
        description: "Tipo de activo de la empresa, como acciones, bonos, etc."

      - name: id_activo
        description: "Clave única para identificar los datos del tipo de activo de la empresa."
        tests:
          - not_null

      - name: sector
        description: "Sector económico en el que opera la empresa, como tecnología, salud, finanzas, etc."

      - name: id_sector
        description: "Clave única para identificar los datos del sector económico de la empresa."
        tests:
          - not_null

      - name: industria
        description: "Industria específica dentro del sector económico en la que opera la empresa."

      - name: id_industria
        description: "Clave única para identificar los datos de la industria específica de la empresa."
        tests:
          - not_null

      - name: bolsa
        description: "Bolsa de valores en la que cotiza la empresa, como NYSE, NASDAQ, etc."

      - name: id_bolsa
        description: "Clave única para identificar los datos de la bolsa de valores en la que cotiza la empresa."
        tests:
          - not_null

      - name: moneda
        description: "Moneda en la que opera la empresa, como USD, EUR, etc."

      - name: id_moneda
        description: "Clave única para identificar los datos de la moneda en la que opera la empresa."
        tests:
          - not_null

      - name: id_pais
        description: "Clave única para identificar los datos del país en el que está registrada la empresa."
        tests:
          - not_null

      - name: pais
        description: "País en el que está registrada la empresa."

      - name: id_raiz_dlt
        description: "Identificador único del linaje de datos (DLT) que rastrea el origen y las transformaciones de los datos."
        tests:
          - not_null
          - unique

      - name: nombre_del_pipeline
        description: "Nombre del pipeline de procesamiento de datos que generó este registro."

      - name: fecha_de_creacion
        description: "Fecha en la que se creó el registro en el sistema."
        tests:
          - not_null
          - fecha_inferior_actual

      - name: fecha_insercion
        description: "Fecha en la que se insertó el registro en la base de datos."
        tests:
          - not_null
          - fecha_inferior_actual


  - name: stg_metadata_dlt
    description: "Tabla con datos de carga y metadatos de procesamiento"
    columns:
      - name: id_carga_dlt
        description: "Identificador único de la carga de datos en el sistema DLT."
        tests:
          - not_null

      - name: id_dlt
        description: "Identificador único del registro en el sistema DLT."
        tests:
          - not_null
          - unique

      - name: nombre_del_pipeline
        description: "Nombre del pipeline de procesamiento de datos que generó este registro."

      - name: fecha_de_creacion
        description: "Fecha en la que se creó el registro en el sistema."
        tests:
          - not_null
          - fecha_inferior_actual

      - name: fecha_insercion
        description: "Fecha en la que se insertó el registro en la base de datos."
        tests:
          - not_null
          - fecha_inferior_actual
